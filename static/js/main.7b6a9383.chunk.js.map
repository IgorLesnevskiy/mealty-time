{"version":3,"sources":["tools/_constants.js","tools/_utils.js","tools/_applyFiltersToDishesList.js","tools/_applySortersToDishesList.js","tools/_userStorageController.js","tools/normalizers/_dishesNormalizer.js","tools/normalizers/_filtersNormalizer.js","tools/normalizers/_sortersNormalizer.js","actions/dishes.js","actions/dishesSorters.js","actions/dishesFilters.js","reducers/dishes.js","reducers/filters.js","reducers/sorters.js","reducers/index.js","components/Page/Page.jsx","components/UpButton/UpButton.jsx","layouts/MainLayout/MainLayout.jsx","components/Floor/Floor.jsx","components/SearchBar/SearchBar.jsx","containers/dishes/DishesSearchBarContainer.js","components/Header/Header.jsx","components/CompoundList/CompoundList.jsx","components/TipIcon/TipIcon.jsx","components/LabelIcon/LabelIcon.jsx","components/Image/Image.jsx","components/Price/Price.jsx","components/DishCard/DishCard.jsx","components/Dish/Dish.jsx","containers/dishes/DishContainer.js","components/DishesList/DishesList.jsx","containers/dishes/DishesListContainer.js","components/LabelButton/LabelButton.jsx","components/ControlBarItem/ControlBarItem.jsx","containers/dishes/DishesControlBarItemContainer.js","components/ControlBar/ControlBar.jsx","containers/dishes/DishesControlBarContainer.js","pages/IndexPage/IndexPage.jsx","components/Application/Application.jsx","index.js"],"names":["FAVORITE_DISHES","LAST_FILTERS_IDS","LAST_SORTERS_IDS","getUniqueId","length","dt","Date","getTime","repeat","replace","r","Math","random","floor","toString","convertToLocalPrice","amount","locale","maximumFractionDigits","n","Number","toLocaleString","applyFilters","dishes","filters","some","isUnknownFilterType","map","getIds","filteredDishes","filter","isEmpty","fields","filterExpression","FILTERING_STRATEGIES","filterType","exclude","dishesList","applyFilter","getFilterByExpression","dish","fieldForFiltering","get","include","expression","re","RegExp","field","test","getStringFilter","getBooleanFilter","console","error","id","applySorters","sorters","isUnknownSorterType","sorter","sortedDishes","SORTING_STRATEGIES","sorterType","asc","fieldForSorting","sort","a","b","fieldA","fieldB","desc","localForage","config","name","instance","getItem","key","setItem","value","removeItem","dishesNormalizer","originalData","userStorageController","constants","normalize","schema","Entity","processStrategy","parent","favorite","includes","price","currency","image","src","alt","title","dishesFiltersNormalizer","type","isChecked","content","getContent","dishesSortersNormalizer","DISHES_FETCH_BEGIN","DISHES_FETCH_SUCCEED","DISHES_FETCH_FAILURE","DISHES_SEARCH_QUERY","DISHES_UPDATE_FAVORITES","dishesFetch","dispatch","dishesFetchBegin","dishesData","normalizedDishes","dishesFetchSucceed","entities","ids","result","favoriteIds","getFavoriteIds","dishesFetchFailure","message","payload","params","dishesSearchQuery","query","dishesToggleFavorite","getStore","newFavoriteIds","push","remove","i","then","Object","keys","SORTERS_APPLY_SORTER","SORTERS_FETCH_BEGIN","SORTERS_FETCH_SUCCEED","SORTERS_FETCH_FAILURE","sortersFetch","sortersFetchBegin","sortersNormalizer","sortersData","normalizedSorters","sortersFetchSucceed","activeIds","getActiveSorters","sortersFetchFailure","applySorter","getState","newActiveIds","forEach","sorterId","FILTERS_APPLY_FILTER","FILTERS_FETCH_BEGIN","FILTERS_FETCH_SUCCEED","FILTERS_FETCH_FAILURE","filtersFetch","filtersFetchBegin","filtersNormalizer","filtersData","normalizedFilters","filtersFetchSucceed","getActiveFilters","filtersFetchFailure","excludeId","initialState","searchQueryString","loading","combineReducers","dishesState","action","dishesActions","dishId","filtersState","filtersActions","filterId","sortersState","sortersActions","Page","props","className","children","DEFAULT_OPTIONS","UpButton","startScrollPosition","onScrollHandlerDelay","useState","isArrowVisible","setArrowVisibility","onButtonClickHandler","useCallback","targetPoint","anime","duration","easing","targets","document","documentElement","body","scrollTop","finished","scrollToPoint","useEffect","onScrollHandler","_throttle","e","shouldShowButton","scrollingElement","addEventListener","removeEventListener","cn","onClick","icon","MainLayout","Fragment","Floor","offsetTop","offsetBottom","disableTopBorder","disableBottomBorder","extraClasses","data-offset-top","data-offset-bottom","SearchBar","placeholder","searchDishes","Function","prototype","onChangeHandler","target","onChange","mapDispatchToProps","connect","searchBarParams","Header","CompoundListItem","itemData","description","measure","MockCompoundList","data","Array","fill","_","CompoundList","isMock","itemDataKey","TipIcon","position","trigger","theme","arrow","LabelIcon","utils","uniqId","htmlFor","checked","ImagePlaceholder","Image","ratio","fit","sources","imageStatus","setImageStatus","onErrorHandler","onLoadHandler","sourcesMarkup","resolution","srcSet","media","Boolean","ImageSources","data-object-ratio","draggable","data-object-fit","onError","onLoad","currenciesMap","Map","entries","RUB","Price","has","IMAGE_MODEL","MockDishCard","count","width","height","DishCard","tip","onFavoriteCallback","onFavoriteButtonChangeHandler","MockDish","Dish","ingredients","foodEnergy","dishCardParams","compoundListParams","state","ownProps","MockDishList","DishesList","values","DishContainer","getProcessedDishesList","SEARCH_FIELDS","createSelector","queryString","resultDishesIds","searchInItem","toLowerCase","searchDishesByQueryString","currentDishes","getDishEntity","filtersEntities","applyFiltersToDishesList","sortersEntities","applySortersToDishesList","MockLabelButton","LabelButton","MockFilterBarItem","ControlBarItem","item","applyCallback","POSSIBLE_TYPES","getApplyCallback","entityItemId","bindActionCreators","MockControlBar","ControlBar","entitiesIds","fetchData","DishesControlBarItemContainer","getFetchDataFunction","IndexPage","DishesControlBarContainer","DishesListContainer","library","add","fas","IndexPageWithLayout","Application","basepath","process","path","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.7b6a9383.chunk.js","sourcesContent":["export default {\n    storage: {\n        FAVORITE_DISHES: \"favoriteDishes\",\n        LAST_FILTERS_IDS: \"lastFiltersIds\",\n        LAST_SORTERS_IDS: \"lastSortersIds\",\n    },\n};\n","/**\n * Генерация уникального ID\n * @param length\n * @returns {string}\n */\nfunction getUniqueId(length = 10) {\n    let dt = new Date().getTime();\n\n    return \"x\".repeat(length).replace(/[x]/g, function () {\n        const r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return r.toString(16);\n    });\n}\n\n/**\n * Конвертация цены для локали\n * @param amount\n * @param locale\n * @param maximumFractionDigits\n *\n * @example\n *    convertToLocalPrice(1200.45); // 12 000,45\n *\n * @returns {any}\n */\nfunction convertToLocalPrice(\n    amount = 0,\n    locale = \"RU\",\n    maximumFractionDigits = 0\n) {\n    const n = Number(amount);\n\n    return typeof n === \"number\"\n        ? n.toLocaleString(locale, {\n              maximumFractionDigits,\n          })\n        : 0;\n}\n\nexport default {\n    getUniqueId,\n    convertToLocalPrice,\n};\n","import isEmpty from \"lodash/isEmpty\";\nimport get from \"lodash/get\";\n\nfunction applyFilters(dishes = [], filters = []) {\n    if (filters.some(isUnknownFilterType)) {\n        return dishes.map(getIds);\n    }\n\n    let filteredDishes = [...dishes];\n\n    for (let filter of filters) {\n        if (isEmpty(filter.fields) || filter.filterExpression === null) {\n            continue;\n        }\n\n        filteredDishes = FILTERING_STRATEGIES[filter.filterType](\n            filteredDishes,\n            filter\n        );\n    }\n\n    return filteredDishes.map(getIds);\n}\n\nexport default applyFilters;\n\n// *****\nconst FILTERING_STRATEGIES = {\n    exclude: function (dishesList, filter) {\n        const { fields = [], filterExpression = null } = filter;\n        const applyFilter = getFilterByExpression(filterExpression);\n\n        return dishesList.filter(function (dish) {\n            return !fields.some(function (fieldForFiltering) {\n                return applyFilter(get(dish, fieldForFiltering));\n            });\n        });\n    },\n\n    include: function (dishesList, filter) {\n        const { fields = [], filterExpression = null } = filter;\n        const applyFilter = getFilterByExpression(filterExpression);\n\n        return dishesList.filter(function (dish) {\n            return fields.some(function (fieldForFiltering) {\n                return applyFilter(get(dish, fieldForFiltering));\n            });\n        });\n    },\n};\n\nfunction getFilterByExpression(expression) {\n    if (typeof expression == \"string\") {\n        return getStringFilter(expression);\n    } else if (typeof expression == \"boolean\") {\n        return getBooleanFilter(expression);\n    }\n}\n\nfunction getStringFilter(expression) {\n    const re = new RegExp(expression);\n\n    return function (field = \"\") {\n        return re.test(field);\n    };\n}\n\nfunction getBooleanFilter(expression) {\n    return function (field = \"\") {\n        if (typeof field === \"boolean\") {\n            return field === expression;\n        }\n\n        if (typeof field === \"string\") {\n            return expression ? !!field.length : !field.length;\n        }\n\n        return false;\n    };\n}\n\nfunction isUnknownFilterType(filter) {\n    if (!FILTERING_STRATEGIES[filter.filterType]) {\n        console.error(`Unknown filter ${filter.filterType}`);\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction getIds(dish) {\n    return dish.id;\n}\n","import isEmpty from \"lodash/isEmpty\";\nimport get from \"lodash/get\";\n\nfunction applySorters(dishes = [], sorters = []) {\n    if (sorters.some(isUnknownSorterType)) {\n        return dishes.map(getIds);\n    }\n\n    const sorter = sorters[0];\n    let sortedDishes = [...dishes];\n\n    if (!isEmpty(sorter.fields)) {\n        sortedDishes = SORTING_STRATEGIES[sorter.sorterType](\n            sortedDishes,\n            sorter\n        );\n    }\n\n    return sortedDishes.map(getIds);\n}\n\nexport default applySorters;\n\n// *****\nconst SORTING_STRATEGIES = {\n    asc: function (dishesList, sorter) {\n        const { fields = [] } = sorter;\n\n        if (isEmpty(fields)) {\n            return dishesList;\n        }\n\n        const fieldForSorting = fields[0];\n\n        return dishesList.sort((a, b) => {\n            const fieldA = get(a, fieldForSorting);\n            const fieldB = get(b, fieldForSorting);\n\n            return fieldA > fieldB ? 1 : fieldA < fieldB ? -1 : 0;\n        });\n    },\n\n    desc: function (dishesList, sorter) {\n        const { fields = [] } = sorter;\n\n        if (isEmpty(fields)) {\n            return dishesList;\n        }\n\n        const fieldForSorting = fields[0];\n\n        return dishesList.sort((a, b) => {\n            const fieldA = get(a, fieldForSorting);\n            const fieldB = get(b, fieldForSorting);\n\n            return fieldA > fieldB ? -1 : fieldA < fieldB ? 1 : 0;\n        });\n    },\n};\n\nfunction isUnknownSorterType(sorter) {\n    if (!SORTING_STRATEGIES[sorter.sorterType]) {\n        console.error(`Unknown sorter ${sorter.sorterType}`);\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction getIds(dish) {\n    return dish.id;\n}\n","import localForage from \"localforage\";\n\nlocalForage.config({\n    name: \"mealty-time\",\n});\n\nexport default {\n    instance: localForage,\n    getItem,\n    setItem,\n    removeItem,\n};\n\nfunction getItem(key) {\n    return localForage.getItem(key);\n}\n\nfunction setItem(key, value) {\n    return localForage.setItem(key, value);\n}\n\nfunction removeItem(key) {\n    return localForage.removeItem(key);\n}\n","import { normalize, schema } from \"normalizr\";\n\nimport constants from \"../_constants\";\nimport userStorageController from \"../_userStorageController\";\n\nexport default async function dishesNormalizer(originalData) {\n    const FAVORITE_DISHES =\n        (await userStorageController.getItem(\n            constants.storage.FAVORITE_DISHES\n        )) || [];\n\n    return normalize(originalData, [\n        new schema.Entity(\n            \"dishes\",\n            {},\n            {\n                processStrategy(value, parent, key) {\n                    return {\n                        ...value,\n                        favorite: FAVORITE_DISHES.includes(value.id),\n                        price: {\n                            value: Number(value.price),\n                            currency: value.currency ? value.currency : \"RUB\",\n                        },\n                        image: {\n                            src: value.image,\n                            alt: value.title,\n                            title: value.title,\n                        },\n                    };\n                },\n            }\n        ),\n    ]);\n}\n","import { normalize, schema } from \"normalizr\";\n\nimport constants from \"../_constants\";\nimport { userStorageController } from \"../index\";\n\nexport default async function dishesFiltersNormalizer(originalData) {\n    const LAST_FILTERS_IDS = (await userStorageController.getItem(\n        constants.storage.LAST_FILTERS_IDS\n    )) || [\"all\"];\n\n    return normalize(originalData, [\n        new schema.Entity(\n            \"filters\",\n            {},\n            {\n                processStrategy(value, parent, key) {\n                    return {\n                        ...value,\n                        type: \"checkbox\",\n                        name: \"filterDish\",\n                        isChecked: LAST_FILTERS_IDS.includes(value.id),\n                        value: value.id,\n                        content: getContent(value),\n                    };\n                },\n            }\n        ),\n    ]);\n}\n\nfunction getContent(value) {\n    if (value.id === \"in-favorites\") {\n        return {\n            type: \"icon\",\n            value: \"heart\",\n        };\n    }\n\n    return {\n        type: \"text\",\n        value: value.title,\n    };\n}\n","import { normalize, schema } from \"normalizr\";\nimport constants from \"../_constants\";\nimport { userStorageController } from \"../index\";\n\nexport default async function dishesSortersNormalizer(originalData) {\n    const LAST_SORTERS_IDS = (await userStorageController.getItem(\n        constants.storage.LAST_SORTERS_IDS\n    )) || [\"by-title-asc\"];\n\n    return normalize(originalData, [\n        new schema.Entity(\n            \"sorters\",\n            {},\n            {\n                processStrategy(value, parent, key) {\n                    return {\n                        ...value,\n                        type: \"radio\",\n                        name: \"sorterDish\",\n                        isChecked: LAST_SORTERS_IDS.includes(value.id),\n                        value: value.id,\n                        content: getContent(value),\n                    };\n                },\n            }\n        ),\n    ]);\n}\n\nfunction getContent(value) {\n    return {\n        type: \"text\",\n        value: value.title,\n    };\n}\n","import remove from \"lodash/remove\";\n\nimport dishesData from \"../resources/data/dishes.json\";\nimport { constants, dishesNormalizer, userStorageController } from \"../tools/\";\n\nexport const DISHES_FETCH_BEGIN = \"DISHES_FETCH_BEGIN\";\nexport const DISHES_FETCH_SUCCEED = \"DISHES_FETCH_SUCCEED\";\nexport const DISHES_FETCH_FAILURE = \"DISHES_FETCH_FAILURE\";\nexport const DISHES_SEARCH_QUERY = \"DISHES_SEARCH_QUERY\";\nexport const DISHES_UPDATE_FAVORITES = \"DISHES_UPDATE_FAVORITES\";\n\nexport const dishesFetch = () => async (dispatch) => {\n    dispatch(dishesFetchBegin());\n\n    try {\n        const normalizedDishes = await dishesNormalizer(dishesData);\n\n        dispatch(\n            dishesFetchSucceed({\n                entities: normalizedDishes.entities.dishes,\n                ids: normalizedDishes.result,\n                favoriteIds: getFavoriteIds(normalizedDishes.entities.dishes),\n            })\n        );\n    } catch (error) {\n        dispatch(\n            dishesFetchFailure({\n                error: error.message,\n            })\n        );\n    }\n};\n\nexport const dishesFetchBegin = () => {\n    return {\n        type: DISHES_FETCH_BEGIN,\n        payload: {},\n    };\n};\n\nexport const dishesFetchSucceed = (dishes) => {\n    return {\n        type: DISHES_FETCH_SUCCEED,\n        payload: dishes,\n    };\n};\n\nexport const dishesFetchFailure = (params) => {\n    const { error } = params;\n\n    return {\n        type: DISHES_FETCH_FAILURE,\n        payload: {\n            error,\n        },\n    };\n};\n\nexport const dishesSearchQuery = (params = {}) => {\n    const { query = \"\" } = params;\n\n    return {\n        type: DISHES_SEARCH_QUERY,\n        payload: {\n            query,\n        },\n    };\n};\n\nexport const dishesToggleFavorite = (params = {}) => {\n    const { id = null, isChecked } = params;\n\n    return (dispatch, getStore) => {\n        const dishes = getStore().dishes;\n        const newFavoriteIds = [...dishes.favoriteIds];\n\n        if (isChecked) {\n            newFavoriteIds.push(id);\n        } else {\n            remove(newFavoriteIds, (i) => i === id);\n        }\n\n        return userStorageController\n            .setItem(constants.storage.FAVORITE_DISHES, newFavoriteIds)\n            .then((favoriteIds) => {\n                dispatch({\n                    type: DISHES_UPDATE_FAVORITES,\n                    payload: {\n                        id,\n                        favoriteIds,\n                    },\n                });\n            });\n    };\n};\n\nconst getFavoriteIds = (dishes = []) => {\n    return Object.keys(dishes).filter((id) => {\n        return dishes[id].favorite;\n    });\n};\n","import remove from \"lodash/remove\";\n\nimport sortersData from \"../resources/data/sorters.json\";\nimport { constants, sortersNormalizer, userStorageController } from \"../tools/\";\n\nexport const SORTERS_APPLY_SORTER = \"SORTERS_APPLY_SORTER\";\n\nexport const SORTERS_FETCH_BEGIN = \"SORTERS_FETCH_BEGIN\";\nexport const SORTERS_FETCH_SUCCEED = \"SORTERS_FETCH_SUCCEED\";\nexport const SORTERS_FETCH_FAILURE = \"SORTERS_FETCH_FAILURE\";\n\nexport const sortersFetch = () => async (dispatch) => {\n    dispatch(sortersFetchBegin());\n\n    try {\n        const normalizedSorters = await sortersNormalizer(sortersData);\n\n        dispatch(\n            sortersFetchSucceed({\n                entities: normalizedSorters.entities.sorters,\n                ids: normalizedSorters.result,\n                activeIds: getActiveSorters(normalizedSorters.entities.sorters),\n            })\n        );\n    } catch (error) {\n        dispatch(\n            sortersFetchFailure({\n                error: error.message,\n            })\n        );\n    }\n};\n\nexport const sortersFetchBegin = () => {\n    return {\n        type: SORTERS_FETCH_BEGIN,\n        payload: {},\n    };\n};\n\nexport const sortersFetchSucceed = (dishes) => {\n    return {\n        type: SORTERS_FETCH_SUCCEED,\n        payload: dishes,\n    };\n};\n\nexport const sortersFetchFailure = (params) => {\n    const { error } = params;\n\n    return {\n        type: SORTERS_FETCH_FAILURE,\n        payload: {\n            error,\n        },\n    };\n};\n\nexport const applySorter = (params = {}) => {\n    const { id = null, isChecked } = params;\n\n    return (dispatch, getState) => {\n        const sorters = getState().sorters;\n        const newActiveIds = [...sorters.activeIds];\n\n        sorters.ids.forEach((sorterId) => {\n            if (sorterId === id) {\n                newActiveIds.push(sorterId);\n            } else {\n                remove(newActiveIds, (i) => i === sorterId);\n            }\n        });\n\n        return userStorageController\n            .setItem(constants.storage.LAST_SORTERS_IDS, newActiveIds)\n            .then((activeIds) => {\n                dispatch({\n                    type: SORTERS_APPLY_SORTER,\n                    payload: {\n                        id,\n                        activeIds,\n                    },\n                });\n            });\n    };\n};\n\nconst getActiveSorters = (sorters = {}) => {\n    return Object.keys(sorters).filter((id) => sorters[id].isChecked);\n};\n","import remove from \"lodash/remove\";\nimport isEmpty from \"lodash/isEmpty\";\n\nimport filtersData from \"../resources/data/filters.json\";\nimport { constants, filtersNormalizer, userStorageController } from \"../tools/\";\nimport { SORTERS_APPLY_SORTER } from \"./dishesSorters\";\n\nexport const FILTERS_APPLY_FILTER = \"FILTERS_APPLY_FILTER\";\n\nexport const FILTERS_FETCH_BEGIN = \"FILTERS_FETCH_BEGIN\";\nexport const FILTERS_FETCH_SUCCEED = \"FILTERS_FETCH_SUCCEED\";\nexport const FILTERS_FETCH_FAILURE = \"FILTERS_FETCH_FAILURE\";\n\nexport const filtersFetch = () => async (dispatch) => {\n    dispatch(filtersFetchBegin());\n\n    try {\n        const normalizedFilters = await filtersNormalizer(filtersData);\n\n        dispatch(\n            filtersFetchSucceed({\n                entities: normalizedFilters.entities.filters,\n                ids: normalizedFilters.result,\n                activeIds: getActiveFilters(normalizedFilters.entities.filters),\n            })\n        );\n    } catch (error) {\n        dispatch(\n            filtersFetchFailure({\n                error: error.message,\n            })\n        );\n    }\n};\n\nexport const filtersFetchBegin = () => {\n    return {\n        type: FILTERS_FETCH_BEGIN,\n        payload: {},\n    };\n};\n\nexport const filtersFetchSucceed = (dishes) => {\n    return {\n        type: FILTERS_FETCH_SUCCEED,\n        payload: dishes,\n    };\n};\n\nexport const filtersFetchFailure = (params) => {\n    const { error } = params;\n\n    return {\n        type: FILTERS_FETCH_FAILURE,\n        payload: {\n            error,\n        },\n    };\n};\n\nexport const applyFilter = (params = {}) => {\n    const { id = null, isChecked } = params;\n\n    return (dispatch, getState) => {\n        const filters = getState().filters;\n        const filter = filters.entities[id];\n        const newActiveIds = [...filters.activeIds];\n\n        if (isChecked) {\n            newActiveIds.push(id);\n\n            if (!isEmpty(filter.exclude)) {\n                filter.exclude.forEach((excludeId) =>\n                    remove(newActiveIds, (i) => i === excludeId)\n                );\n            }\n        } else {\n            remove(newActiveIds, (i) => i === id);\n        }\n\n        return userStorageController\n            .setItem(constants.storage.LAST_FILTERS_IDS, newActiveIds)\n            .then((activeIds) => {\n                dispatch({\n                    type: FILTERS_APPLY_FILTER,\n                    payload: {\n                        id,\n                        activeIds,\n                    },\n                });\n            });\n    };\n};\n\nconst getActiveFilters = (filters = {}) => {\n    return Object.keys(filters).filter((id) => filters[id].isChecked);\n};\n","import { dishesActions } from \"../actions\";\nimport { constants } from \"../tools\";\n\nimport remove from \"lodash/remove\";\n\nconst initialState = {\n    entities: {},\n    ids: [],\n    favoriteIds: [],\n    searchQueryString: \"\",\n    loading: true,\n    error: null,\n};\n\nexport default function dishes(dishesState = initialState, action) {\n    /**\n     * Старт загрузки списка блюд\n     */\n    if (action.type === dishesActions.DISHES_FETCH_BEGIN) {\n        return {\n            ...dishesState,\n            loading: true,\n        };\n    }\n\n    /**\n     * Успешное окончание загрузки списка блюд\n     */\n    if (action.type === dishesActions.DISHES_FETCH_SUCCEED) {\n        return {\n            ...dishesState,\n            ...action.payload,\n            loading: false,\n        };\n    }\n\n    /**\n     * Ошибка при загрузке списка блюд\n     */\n    if (action.type === dishesActions.DISHES_FETCH_FAILURE) {\n        console.error(action.payload.error);\n\n        return {\n            ...dishesState,\n            loading: false,\n            error: action.payload.error,\n        };\n    }\n\n    /**\n     * Поиск по блюдам\n     */\n    if (action.type === dishesActions.DISHES_SEARCH_QUERY) {\n        return {\n            ...dishesState,\n            searchQueryString: action.payload.query || \"\",\n        };\n    }\n\n    /**\n     * Удалить блюдо из Избранного\n     */\n    if (action.type === dishesActions.DISHES_UPDATE_FAVORITES) {\n        const favoriteIds = action.payload.favoriteIds;\n        const dishes = { ...dishesState };\n\n        for (let dishId of dishes.ids) {\n            dishes.entities[dishId].favorite = favoriteIds.includes(dishId);\n        }\n\n        dishes.favoriteIds = favoriteIds;\n\n        return {\n            ...dishesState,\n            ...dishes,\n        };\n    }\n\n    return dishesState;\n}\n","import { filtersActions } from \"../actions\";\n\nconst initialState = {\n    entities: {},\n    ids: [],\n    activeIds: [],\n    loading: true,\n    error: null,\n};\n\nexport default function filters(filtersState = initialState, action) {\n    /**\n     * Старт загрузки списка блюд\n     */\n    if (action.type === filtersActions.FILTERS_FETCH_BEGIN) {\n        return {\n            ...filtersState,\n            loading: true,\n        };\n    }\n\n    /**\n     * Успешное окончание загрузки списка блюд\n     */\n    if (action.type === filtersActions.FILTERS_FETCH_SUCCEED) {\n        return {\n            ...filtersState,\n            ...action.payload,\n            loading: false,\n        };\n    }\n\n    /**\n     * Ошибка при загрузке списка блюд\n     */\n    if (action.type === filtersActions.FILTERS_FETCH_FAILURE) {\n        console.error(action.payload.error);\n\n        return {\n            ...filtersState,\n            loading: false,\n            error: action.payload.error,\n        };\n    }\n\n    /**\n     * Применить фильтр к списку блюд\n     */\n    if (action.type === filtersActions.FILTERS_APPLY_FILTER) {\n        const activeIds = action.payload.activeIds;\n        const filters = { ...filtersState };\n\n        for (let filterId of filters.ids) {\n            filters.entities[filterId].isChecked = activeIds.includes(filterId);\n        }\n\n        filters.activeIds = activeIds;\n\n        return {\n            ...filtersState,\n            ...filters,\n        };\n    }\n\n    return filtersState;\n}\n","import { sortersActions } from \"../actions\";\n\nconst initialState = {\n    entities: {},\n    ids: [],\n    activeIds: [\"by-title-asc\"],\n    loading: true,\n    error: null,\n};\n\nexport default function sorters(sortersState = initialState, action) {\n    /**\n     * Старт загрузки списка блюд\n     */\n    if (action.type === sortersActions.SORTERS_FETCH_BEGIN) {\n        return {\n            ...sortersState,\n            loading: true,\n        };\n    }\n\n    /**\n     * Успешное окончание загрузки списка блюд\n     */\n    if (action.type === sortersActions.SORTERS_FETCH_SUCCEED) {\n        return {\n            ...sortersState,\n            ...action.payload,\n            loading: false,\n        };\n    }\n\n    /**\n     * Ошибка при загрузке списка блюд\n     */\n    if (action.type === sortersActions.SORTERS_FETCH_FAILURE) {\n        console.error(action.payload.error);\n\n        return {\n            ...sortersState,\n            loading: false,\n            error: action.payload.error,\n        };\n    }\n\n    /**\n     * Применить фильтр к списку блюд\n     */\n    if (action.type === sortersActions.SORTERS_APPLY_SORTER) {\n        const activeIds = action.payload.activeIds;\n        const sorters = { ...sortersState };\n\n        for (let sorterId of sorters.ids) {\n            sorters.entities[sorterId].isChecked = activeIds.includes(sorterId);\n        }\n\n        sorters.activeIds = activeIds;\n\n        return {\n            ...sortersState,\n            ...sorters,\n        };\n    }\n\n    return sortersState;\n}\n","import { combineReducers } from \"redux\";\n\nimport dishes from \"./dishes\";\nimport filters from \"./filters\";\nimport sorters from \"./sorters\";\n\nexport default combineReducers({\n    dishes,\n    filters,\n    sorters,\n});\n","import React from \"react\";\n\nimport \"./Page.scss\";\n\nconst Page = (props) => {\n    return (\n        <div className=\"page\">\n            <div className=\"page__inner\">{props.children}</div>\n        </div>\n    );\n};\n\nexport default Page;\n","import React, { useEffect, useCallback, useState } from \"react\";\nimport cn from \"classnames\";\nimport anime from \"animejs/lib/anime.es.js\";\nimport _throttle from \"lodash/throttle\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport \"./UpButton.scss\";\n\nconst DEFAULT_OPTIONS = {\n    startScrollPosition: 100, // px, с какой точки начинать показывать стрелку\n    onScrollHandlerDelay: 150, // ms, время throttle-задержки\n    arrowVisibilityClass: \"is-visible\", // класс для показа кнопки\n};\n\n// document.addEventListener('scroll', _throttle(this.onScrollHandler.bind(this), this.config.onScrollHandlerDelay));\nconst UpButton = (props) => {\n    const {\n        startScrollPosition = DEFAULT_OPTIONS.startScrollPosition,\n        onScrollHandlerDelay = DEFAULT_OPTIONS.onScrollHandlerDelay,\n    } = props;\n\n    const [isArrowVisible, setArrowVisibility] = useState(false);\n\n    const onButtonClickHandler = useCallback(() => {\n        scrollToPoint();\n    }, []);\n\n    useEffect(() => {\n        const onScrollHandler = _throttle(function (e) {\n            const shouldShowButton = getScrollTopValue() > startScrollPosition;\n\n            if (shouldShowButton && !isArrowVisible) {\n                setArrowVisibility(true);\n            } else if (!shouldShowButton && isArrowVisible) {\n                setArrowVisibility(false);\n            }\n        }, onScrollHandlerDelay);\n\n        document.addEventListener(\"scroll\", onScrollHandler);\n\n        return () => {\n            document.removeEventListener(\"scroll\", onScrollHandler);\n        };\n    }, [isArrowVisible, onScrollHandlerDelay, startScrollPosition]);\n\n    return (\n        <button\n            className={cn(\"up-button\", isArrowVisible ? \"is-visible\" : \"\")}\n            onClick={onButtonClickHandler}\n        >\n            <FontAwesomeIcon\n                icon={[\"fas\", \"arrow-up\"]}\n                className={\"up-button__icon\"}\n            />\n        </button>\n    );\n};\n\nexport default UpButton;\n\n//*****\n\nfunction scrollToPoint(targetPoint = 0) {\n    return anime({\n        duration: 500, // ms, длительной анимация прокручивания\n        easing: \"cubicBezier(0.215, 0.61, 0.355, 1)\", // типа анимации\n        targets: [document.documentElement, document.body],\n        scrollTop: targetPoint,\n    }).finished;\n}\n\nfunction getScrollTopValue() {\n    const el = document.scrollingElement || document.documentElement;\n\n    return el.scrollTop;\n}\n","import React from \"react\";\n\nimport Page from \"../../components/Page/Page\";\n\nimport \"./MainLayout.scss\";\nimport UpButton from \"../../components/UpButton\";\n\nconst MainLayout = (props) => {\n    return (\n        <React.Fragment>\n            <Page>{props.children}</Page>\n\n            <UpButton />\n        </React.Fragment>\n    );\n};\n\nexport default MainLayout;\n","import React from \"react\";\nimport cn from \"classnames\";\n\nimport \"./Floor.scss\";\n\nconst Floor = (props) => {\n    const {\n        offsetTop = \"small\",\n        offsetBottom = \"small\",\n        disableTopBorder = false,\n        disableBottomBorder = false,\n        extraClasses = [],\n        children,\n    } = props;\n\n    return (\n        <div\n            className={cn(\"floor\", extraClasses)}\n            data-offset-top={offsetTop}\n            data-offset-bottom={offsetBottom}\n            {...(disableTopBorder && { \"data-disable-top-border\": true })}\n            {...(disableBottomBorder && { \"data-disable-bottom-border\": true })}\n        >\n            <div className=\"floor__inner\">{children}</div>\n        </div>\n    );\n};\n\nexport default Floor;\n","import React, { useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport \"./SearchBar.scss\";\n\nconst SearchBar = (props) => {\n    const {\n        name = \"search\",\n        placeholder = \"Найти...\",\n        searchDishes = Function.prototype,\n    } = props;\n\n    const onChangeHandler = useCallback(\n        (e) => {\n            searchDishes({\n                query: e.target.value,\n            });\n        },\n        [searchDishes]\n    );\n\n    return (\n        <div className=\"search\">\n            <FontAwesomeIcon\n                icon={[\"fas\", \"search\"]}\n                className={\"search__icon\"}\n            />\n            <input\n                className=\"search__input\"\n                type={\"search\"}\n                name={name}\n                placeholder={placeholder}\n                onChange={onChangeHandler}\n            />\n        </div>\n    );\n};\n\nexport default SearchBar;\n","import { connect } from \"react-redux\";\nimport { dishesActions } from \"../../actions\";\nimport SearchBar from \"../../components/SearchBar\";\n\nconst mapDispatchToProps = {\n    searchDishes: dishesActions.dishesSearchQuery,\n};\n\nexport default connect(null, mapDispatchToProps)(SearchBar);\n","import React from \"react\";\n\nimport \"./Header.scss\";\nimport SearchBarContainer from \"../../containers/dishes/DishesSearchBarContainer\";\n\nconst searchBarParams = {\n    name: \"search\",\n    placeholder: \"Найти...\",\n};\n\nconst Header = (props) => {\n    const { title = \"Меню\" } = props;\n\n    return (\n        <header className=\"header\">\n            <div className=\"header__title\">{title}</div>\n            <div className=\"header__search\">\n                <SearchBarContainer {...searchBarParams} />\n            </div>\n        </header>\n    );\n};\n\nexport default Header;\n","import React from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\nimport isEmpty from \"lodash/isEmpty\";\n\nimport \"./CompoundList.scss\";\n\nconst CompoundList = (props) => {\n    const { data = {}, dishId, isMock = false } = props;\n\n    if (isMock) {\n        return <MockCompoundList />;\n    }\n\n    if (isEmpty(data)) {\n        return null;\n    }\n\n    return (\n        <ul className={\"compound-list\"}>\n            {Object.keys(data).map((itemDataKey) => {\n                return CompoundListItem({\n                    key: `${dishId}-compound-item-${itemDataKey}`,\n                    itemData: data[itemDataKey],\n                });\n            })}\n        </ul>\n    );\n};\n\nconst CompoundListItem = ({ key, itemData }) => {\n    return (\n        <React.Fragment key={key}>\n            <li className={\"compound-list__row\"}>\n                <div className={\"compound-list__description\"}>\n                    {itemData.description}&nbsp;\n                    <span>({itemData.measure})</span>\n                </div>\n                <div className={\"compound-list__measure\"}>\n                    {itemData.amount}\n                </div>\n            </li>\n        </React.Fragment>\n    );\n};\n\nconst MockCompoundList = () => {\n    const data = Array(3).fill();\n\n    return (\n        <ul className={\"compound-list\"}>\n            {data.map((_, key) => {\n                return (\n                    <React.Fragment key={`mock-compound-item-${key}`}>\n                        <li className={\"compound-list__row\"}>\n                            <div className={\"compound-list__measure\"}>\n                                <Skeleton />\n                            </div>\n                            <div className={\"compound-list__description\"}>\n                                <Skeleton />\n                            </div>\n                        </li>\n                    </React.Fragment>\n                );\n            })}\n        </ul>\n    );\n};\n\nexport default CompoundList;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Tooltip } from \"react-tippy\";\n\nimport \"./TipIcon.scss\";\n\nconst TipIcon = (props) => {\n    const {\n        content = \"\",\n        position = \"bottom\",\n        trigger = \"mouseenter\",\n        icon = \"info-circle\",\n        theme = \"primary\",\n        arrow = true,\n    } = props;\n\n    return (\n        <div className={\"tip-icon\"}>\n            <Tooltip\n                className={\"tip-icon__inner\"}\n                title={content}\n                position={position}\n                trigger={trigger}\n                theme={theme}\n                arrow={arrow}\n            >\n                <FontAwesomeIcon icon={[\"fas\", icon]} />\n            </Tooltip>\n        </div>\n    );\n};\n\nexport default TipIcon;\n","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport \"./LabelIcon.scss\";\nimport { utils } from \"../../tools\";\n\nconst LabelIcon = (props) => {\n    const {\n        type = \"radio\",\n        name = \"\",\n        id = null,\n        isChecked = false,\n        onChange = Function.prototype,\n        value,\n        icon,\n    } = props;\n\n    const [uniqId] = useState(id || utils.getUniqueId());\n\n    return (\n        <div>\n            <label className={\"label-icon\"} htmlFor={uniqId}>\n                <input\n                    id={uniqId}\n                    className={\"label-icon__control\"}\n                    type={type}\n                    name={name}\n                    checked={isChecked}\n                    value={value}\n                    onChange={onChange}\n                />\n                <span className={\"label-icon__content\"}>\n                    <FontAwesomeIcon icon={[\"fas\", icon]} />\n                </span>\n            </label>\n        </div>\n    );\n};\n\nexport default LabelIcon;\n","import React, { useCallback, useState } from \"react\";\nimport cn from \"classnames\";\n\nimport { LazyLoadComponent } from \"react-lazy-load-image-component\";\n\nimport \"./Image.scss\";\n\nconst PIXEL_SRC =\n    \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\nfunction Image(props) {\n    const {\n        ratio = \"16x9\",\n        fit = \"cover\",\n        src,\n        alt,\n        title,\n        sources = [\n            // [\n            //     \"(min-width: 1200px)\",\n            //     \"https://dummyimage.com/1920x1200/2ecc71/ffffff.jpg\",\n            //     \"image/jpeg\",\n            // ],\n        ],\n    } = props;\n\n    const [imageStatus, setImageStatus] = useState(\"is-loading\");\n\n    const onErrorHandler = useCallback(() => {\n        setImageStatus(\"is-error\");\n    }, []);\n\n    const onLoadHandler = useCallback(() => {\n        setImageStatus(\"is-loaded\");\n    }, []);\n\n    const sourcesMarkup = ImageSources({ sources });\n\n    return (\n        <div className={\"image\"} data-object-ratio={ratio}>\n            <div className={cn([\"image__container\", imageStatus])}>\n                <LazyLoadComponent placeholder={<ImagePlaceholder />}>\n                    <picture className={\"image__picture\"}>\n                        {sourcesMarkup}\n                        <img\n                            className={\"image__source\"}\n                            src={src}\n                            draggable=\"false\"\n                            alt={alt}\n                            title={title}\n                            data-object-fit={fit}\n                            onError={\n                                imageStatus === \"is-error\"\n                                    ? null\n                                    : onErrorHandler\n                            }\n                            onLoad={\n                                imageStatus === \"is-loading\"\n                                    ? onLoadHandler\n                                    : null\n                            }\n                        />\n                    </picture>\n                </LazyLoadComponent>\n            </div>\n        </div>\n    );\n}\n\nfunction ImageSources({ sources = [] }) {\n    if (!sources || !sources.length) {\n        return null;\n    }\n\n    return sources\n        .map(([resolution, src, type = \"image/svg+xml\"]) => {\n            if (!src) {\n                return null;\n            }\n\n            return <source type={type} srcSet={src} media={resolution} />;\n        })\n        .filter(Boolean);\n}\n\nfunction ImagePlaceholder() {\n    return (\n        <picture className={\"image__picture\"}>\n            <img className={\"image__source\"} src={PIXEL_SRC} alt={\"\"} />\n        </picture>\n    );\n}\n\nexport default Image;\n","import React from \"react\";\n\nimport \"./Price.scss\";\n\nimport { utils } from \"../../tools\";\n\nconst currenciesMap = new Map(\n    Object.entries({\n        RUB: (price = 0) => {\n            return (\n                <React.Fragment>\n                    {utils.convertToLocalPrice(price, \"RU\")}\n                    <span className={\"price__currency\"}> руб.</span>\n                </React.Fragment>\n            );\n        },\n    })\n);\n\nconst Price = (props) => {\n    const { value = 0, currency = \"RUB\" } = props;\n\n    if (!currenciesMap.has(currency)) {\n        return null;\n    }\n\n    return <div className={\"price\"}>{currenciesMap.get(currency)(value)}</div>;\n};\n\nexport default Price;\n","import React, { useCallback } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\n\nimport \"./DishCard.scss\";\nimport TipIcon from \"../TipIcon\";\nimport LabelIcon from \"../LabelIcon\";\nimport Image from \"../Image\";\nimport Price from \"../Price\";\n\nconst IMAGE_MODEL = {\n    alt: \"\",\n    title: \"\",\n    src: \"\",\n};\n\nconst DishCard = (props) => {\n    const {\n        isMock = false,\n        id,\n        price,\n        title,\n        image = IMAGE_MODEL,\n        tip,\n        favorite = false,\n        onFavoriteCallback = Function.prototype,\n    } = props;\n\n    const onFavoriteButtonChangeHandler = useCallback(\n        (e) => {\n            const isChecked = e.target.checked;\n\n            onFavoriteCallback({\n                id,\n                isChecked,\n            });\n        },\n        [onFavoriteCallback, id]\n    );\n\n    if (isMock) {\n        return <MockDishCard />;\n    }\n\n    return (\n        <div className={\"dish-card\"}>\n            <div className={\"dish-card__price-line\"}>\n                {price && (\n                    <div className={\"dish-card__price\"}>\n                        <Price value={price.value} />\n                    </div>\n                )}\n\n                {tip && tip.content && (\n                    <div className={\"dish-card__tip\"}>\n                        <TipIcon\n                            content={tip.content}\n                            position={tip.position}\n                            trigger={tip.trigger}\n                        />\n                    </div>\n                )}\n            </div>\n            <div className={\"dish-card__title\"}>\n                <h3>{title}</h3>\n            </div>\n            <div className={\"dish-card__image\"}>\n                <LabelIcon\n                    id={`dish-${id}`}\n                    type={\"checkbox\"}\n                    name={`dish-${id}`}\n                    icon={\"heart\"}\n                    value={id}\n                    isChecked={favorite}\n                    onChange={onFavoriteButtonChangeHandler}\n                />\n                {image && (\n                    <Image\n                        src={image.src}\n                        alt={image.alt}\n                        title={image.title}\n                    />\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst MockDishCard = (props) => {\n    return (\n        <div className={\"dish-card\"}>\n            <div className={\"dish-card__price-line is-mock\"}>\n                <Skeleton />\n            </div>\n            <div className={\"dish-card__title\"}>\n                <h3>\n                    <Skeleton count={3} />\n                </h3>\n            </div>\n            <div className={\"dish-card__image\"}>\n                <Skeleton width={\"100%\"} height={200} />\n            </div>\n        </div>\n    );\n};\n\nexport default DishCard;\n","import React, { useState } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\nimport isEmpty from \"lodash/isEmpty\";\n\nimport \"./Dish.scss\";\nimport CompoundList from \"../CompoundList\";\nimport DishCard from \"../DishCard\";\nimport { utils } from \"../../tools\";\n\nconst Dish = ({ dish = {}, isMock, onFavoriteCallback }) => {\n    const {\n        price,\n        id = null,\n        tip,\n        title,\n        favorite = false,\n        image,\n        description,\n        ingredients,\n        foodEnergy,\n    } = dish;\n\n    const [uniqId] = useState(id || utils.getUniqueId());\n\n    const dishCardParams = {\n        id,\n        price,\n        tip,\n        title,\n        favorite,\n        image,\n        onFavoriteCallback,\n    };\n\n    const compoundListParams = {\n        data: foodEnergy,\n        dishId: uniqId,\n    };\n\n    if (isMock) {\n        return <MockDish />;\n    }\n\n    return (\n        <div className={\"dish\"}>\n            <div className={\"dish__card\"}>\n                <DishCard {...dishCardParams} />\n            </div>\n\n            <div className={\"dish__info\"}>\n                {description && (\n                    <div className={\"dish__description\"}>{description}</div>\n                )}\n\n                <div className={\"dish__compound-line\"}>\n                    {!isEmpty(foodEnergy) && (\n                        <div className={\"dish__compound-list\"}>\n                            <CompoundList {...compoundListParams} />\n                        </div>\n                    )}\n                    {ingredients && (\n                        <div className={\"dish__ingredients-wrapper\"}>\n                            <div className={\"dish__ingredients-title\"}>\n                                Состав:\n                            </div>\n                            <div className={\"dish__ingredients\"}>\n                                {ingredients}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst MockDish = (props) => {\n    return (\n        <div className={\"dish\"}>\n            <div className={\"dish__card\"}>\n                <DishCard isMock={true} />\n            </div>\n\n            <div className={\"dish__info\"}>\n                <div className={\"dish__description\"}>\n                    <Skeleton count={5} />\n                </div>\n\n                <div className={\"dish__compound-line\"}>\n                    <div className={\"dish__compound-list\"}>\n                        <CompoundList isMock={true} />\n                    </div>\n                    <div className={\"dish__ingredients-wrapper\"}>\n                        <div className={\"dish__ingredients-title\"}>\n                            <Skeleton count={1} />\n                        </div>\n                        <div className={\"dish__ingredients\"}>\n                            <Skeleton count={5} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Dish;\n","import { connect } from \"react-redux\";\nimport { dishesActions } from \"../../actions\";\nimport Dish from \"../../components/Dish\";\n\nconst mapStateToProps = (state, ownProps) => {\n    return {\n        dish: {\n            ...state.dishes.entities[ownProps.dishId],\n        },\n    };\n};\n\nconst mapDispatchToProps = {\n    onFavoriteCallback: dishesActions.dishesToggleFavorite,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dish);\n","import React, { useEffect } from \"react\";\n\nimport Dish from \"../Dish\";\nimport DishContainer from \"../../containers/dishes/DishContainer\";\n\nimport \"./DishesList.scss\";\n\nconst DishesList = (props) => {\n    const {\n        dishes = [],\n        dishesFetch = Function.prototype,\n        loading = true,\n        error = null,\n    } = props;\n\n    useEffect(() => {\n        dishesFetch();\n\n        return () => {};\n    }, [dishesFetch]);\n\n    if (loading) {\n        return <MockDishList />;\n    }\n\n    if (error) {\n        return (\n            <p className={\"error-message\"}>\n                Во время загрузки списка произошла ошибка\n            </p>\n        );\n    }\n\n    if (!Object.values(dishes).length || error) {\n        return <p className={\"info-message\"}>Нет блюд для отображения</p>;\n    }\n\n    return (\n        <div className={\"dishes\"}>\n            {dishes.map((dishId) => (\n                <div className={\"dishes__item\"} key={dishId}>\n                    <DishContainer dishId={dishId} />\n                </div>\n            ))}\n        </div>\n    );\n};\n\nconst MockDishList = () => {\n    const data = Array(3).fill();\n\n    return (\n        <div className={\"dishes\"}>\n            {data.map((_, key) => {\n                return (\n                    <div\n                        className={\"dishes__item\"}\n                        key={`mock-dish-list-item-${key}`}\n                    >\n                        <Dish isMock={true} />\n                    </div>\n                );\n            })}\n        </div>\n    );\n};\n\nexport default DishesList;\n","import { connect } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport isEmpty from \"lodash/isEmpty\";\n\nimport { dishesActions } from \"../../actions\";\nimport DishesList from \"../../components/DishesList\";\nimport {\n    applyFiltersToDishesList,\n    applySortersToDishesList,\n} from \"../../tools\";\n\nconst mapStateToProps = (state) => {\n    return {\n        dishes: getProcessedDishesList(state),\n        loading: state.dishes.loading,\n        error: state.dishes.error,\n    };\n};\n\nconst mapDispatchToProps = {\n    dishesFetch: dishesActions.dishesFetch,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DishesList);\n\nconst SEARCH_FIELDS = [\"title\", \"description\", \"ingredients\"];\nconst MINIMAL_SYMBOLS_FOR_SEARCH = 3;\n\nconst getDishes = (state) => state.dishes;\nconst getSearchQueryString = (state) => state.dishes.searchQueryString;\nconst getSorters = (state) => state.sorters;\nconst getFilters = (state) => state.filters;\n\nconst getProcessedDishesList = createSelector(\n    [getDishes, getSearchQueryString, getSorters, getFilters],\n    (dishes, queryString, sorters, filters) => {\n        let resultDishesIds = dishes.ids;\n\n        {\n            if (queryString.length >= MINIMAL_SYMBOLS_FOR_SEARCH) {\n                resultDishesIds = searchDishesByQueryString(\n                    dishes,\n                    queryString\n                );\n            }\n        }\n\n        {\n            if (!isEmpty(filters.entities) && !isEmpty(resultDishesIds)) {\n                const currentDishes = resultDishesIds.map(getDishEntity);\n                const filtersEntities = filters.activeIds.map(getFilterEntity);\n\n                resultDishesIds = applyFiltersToDishesList(\n                    currentDishes,\n                    filtersEntities\n                );\n            }\n        }\n\n        {\n            if (!isEmpty(sorters.entities) && !isEmpty(resultDishesIds)) {\n                const currentDishes = resultDishesIds.map(getDishEntity);\n                const sortersEntities = sorters.activeIds.map(\n                    getSortersEntities\n                );\n\n                resultDishesIds = applySortersToDishesList(\n                    currentDishes,\n                    sortersEntities\n                );\n            }\n        }\n\n        return resultDishesIds;\n\n        //*****\n        function getDishEntity(id) {\n            return dishes.entities[id];\n        }\n\n        function getFilterEntity(id) {\n            return filters.entities[id];\n        }\n\n        function getSortersEntities(id) {\n            return sorters.entities[id];\n        }\n    }\n);\n\nfunction searchDishesByQueryString(dishes, queryString = \"\") {\n    return dishes.ids.filter(searchInItem);\n\n    // ******\n    function searchInItem(dishId) {\n        const dish = dishes.entities[dishId];\n\n        return SEARCH_FIELDS.some((field) => {\n            if (!dish[field]) {\n                return false;\n            }\n\n            if (typeof dish[field] != \"string\") {\n                return false;\n            }\n\n            return dish[field]\n                .toLowerCase()\n                .includes(queryString.toLowerCase());\n        });\n    }\n}\n","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Skeleton from \"react-loading-skeleton\";\nimport cn from \"classnames\";\n\n\nimport \"./LabelButton.scss\";\nimport {utils} from \"../../tools\";\n\nconst LabelButton = (props) => {\n    const {\n        isMock = false,\n        type = \"radio\",\n        name = \"\",\n        id = null,\n        isChecked = false,\n        onChange = Function.prototype,\n        value,\n        content,\n    } = props;\n\n    const [uniqId] = useState(id || utils.getUniqueId());\n\n    if (isMock) {\n        return <MockLabelButton />;\n    }\n\n    return (\n        <label className={cn([\"label-button\", `is-${type}`])} htmlFor={uniqId}>\n            <input\n                id={uniqId}\n                className={\"label-button__control\"}\n                type={type}\n                name={name}\n                checked={isChecked}\n                value={value}\n                onChange={onChange}\n            />\n\n            <span className={\"label-button__content\"}>\n                {content.type === \"text\" ? (\n                    content.value\n                ) : (\n                    <FontAwesomeIcon icon={[\"fas\", content.value]} />\n                )}\n            </span>\n        </label>\n    );\n};\n\nconst MockLabelButton = (props) => {\n    return (\n        <label className={\"label-button\"}>\n            <Skeleton width={70} height={\"100%\"} />\n        </label>\n    );\n};\n\nexport default LabelButton;\n","import React, { useCallback } from \"react\";\nimport isEmpty from \"lodash/isEmpty\";\n\nimport \"./ControlBarItem.scss\";\nimport LabelButton from \"../LabelButton\";\n\nconst ControlBarItem = ({\n    item = {},\n    applyCallback = Function.prototype,\n    isMock = false,\n}) => {\n    const onChangeHandler = useCallback(\n        (e) => {\n            applyCallback({\n                id: e.target.value,\n                isChecked: e.target.checked,\n            });\n        },\n        [applyCallback]\n    );\n\n    if (isMock) {\n        return <MockFilterBarItem />;\n    }\n\n    if (isEmpty(item)) {\n        return null;\n    }\n\n    return (\n        <LabelButton\n            id={item.id}\n            type={item.type}\n            name={item.name}\n            content={item.content}\n            value={item.value}\n            isChecked={item.isChecked}\n            onChange={onChangeHandler}\n        />\n    );\n};\n\nconst MockFilterBarItem = () => {\n    return <LabelButton isMock={true} />;\n};\n\nexport default ControlBarItem;\n","import { connect } from \"react-redux\";\nimport { filtersActions, sortersActions } from \"../../actions\";\nimport { bindActionCreators } from \"redux\";\nimport ControlBarItem from \"../../components/ControlBarItem\";\n\nconst POSSIBLE_TYPES = [\"filters\", \"sorters\"];\n\nconst getApplyCallback = (type) => {\n    if (type === \"filters\") {\n        return filtersActions.applyFilter;\n    } else if (type === \"sorters\") {\n        return sortersActions.applySorter;\n    } else {\n        return Function.prototype;\n    }\n};\n\nconst mapStateToProps = (state, ownProps) => {\n    const { type, entityItemId } = ownProps;\n\n    if (!POSSIBLE_TYPES.includes(type)) {\n        console.error(`Unknown container type ${type}`);\n        return {};\n    }\n\n    return {\n        item: {\n            ...state[type].entities[entityItemId],\n        },\n    };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    const { type } = ownProps;\n\n    return bindActionCreators(\n        {\n            applyCallback: getApplyCallback(type),\n        },\n        dispatch\n    );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlBarItem);\n","import React, { useEffect } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\n\nimport \"./ControlBar.scss\";\n\nimport ControlBarItem from \"../ControlBarItem\";\nimport DishesControlBarItemContainer from \"../../containers/dishes/DishesControlBarItemContainer\";\n\nconst ControlBar = (props) => {\n    const {\n        entitiesIds = [],\n        type = \"\",\n        loading = true,\n        error = null,\n        fetchData = Function.prototype,\n        title,\n    } = props;\n\n    useEffect(() => {\n        fetchData();\n\n        return () => {};\n    }, [fetchData]);\n\n    if (loading) {\n        return <MockControlBar />;\n    }\n\n    if (error) {\n        return null;\n    }\n\n    return (\n        <div className={\"control-bar\"}>\n            {title && <div className={\"control-bar__title\"}>{title}</div>}\n            <div className={\"control-bar__items\"}>\n                {entitiesIds.map((entityItemId) => (\n                    <div className={\"control-bar__item\"} key={entityItemId}>\n                        <DishesControlBarItemContainer\n                            entityItemId={entityItemId}\n                            type={type}\n                        />\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nconst MockControlBar = () => {\n    const data = Array(3).fill();\n\n    return (\n        <div className={\"control-bar\"}>\n            <div className={\"control-bar__title\"}>\n                <Skeleton count={1} width={80} />\n            </div>\n            <div className={\"control-bar__items\"}>\n                {data.map((_, key) => (\n                    <div\n                        className={\"control-bar__item\"}\n                        key={`mock-control-bar-item-${key}`}\n                    >\n                        <ControlBarItem isMock={true} />\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ControlBar;\n","import { connect } from \"react-redux\";\nimport ControlBar from \"../../components/ControlBar\";\nimport { filtersActions, sortersActions } from \"../../actions\";\n\nconst POSSIBLE_TYPES = [\"filters\", \"sorters\"];\n\nconst getFetchDataFunction = (type = \"\") => {\n    if (type === \"filters\") {\n        return filtersActions.filtersFetch;\n    } else if (type === \"sorters\") {\n        return sortersActions.sortersFetch;\n    } else {\n        return Function.prototype;\n    }\n};\n\nconst mapStateToProps = (state, ownProps) => {\n    const { type = \"\" } = ownProps;\n\n    if (!POSSIBLE_TYPES.includes(type)) {\n        console.error(`Unknown container type ${type}`);\n        return {};\n    }\n\n    return {\n        entitiesIds: state[type].ids,\n        type,\n        loading: state[type].loading,\n        error: state[type].error,\n    };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    const { type = \"\" } = ownProps;\n\n    if (!POSSIBLE_TYPES.includes(type)) {\n        console.error(`Unknown container type ${type}`);\n        return {};\n    }\n\n    return {\n        fetchData: () => dispatch(getFetchDataFunction(type)()),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlBar);\n","import React from \"react\";\n\nimport Floor from \"../../components/Floor\";\nimport Header from \"../../components/Header\";\n\nimport DishesListContainer from \"../../containers/dishes/DishesListContainer\";\nimport DishesControlBarContainer from \"../../containers/dishes/DishesControlBarContainer\";\n\nconst IndexPage = () => {\n    return (\n        <React.Fragment>\n            <Floor\n                offsetTop={\"medium\"}\n                offsetBottom={\"medium\"}\n                disableBottomBorder={true}\n            >\n                <Header />\n            </Floor>\n\n            <Floor\n                offsetTop={\"small\"}\n                offsetBottom={\"small\"}\n                disableBottomBorder={true}\n            >\n                <DishesControlBarContainer type={\"filters\"} title={\"Фильтры\"} />\n            </Floor>\n\n            <Floor offsetTop={\"small\"} offsetBottom={\"small\"}>\n                <DishesControlBarContainer\n                    type={\"sorters\"}\n                    title={\"Сортировки\"}\n                />\n            </Floor>\n\n            <Floor offsetTop={\"none\"} offsetBottom={\"none\"}>\n                <DishesListContainer />\n            </Floor>\n        </React.Fragment>\n    );\n};\n\nexport default IndexPage;\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\n\nimport \"./Application.scss\";\n\n//layouts\nimport MainLayout from \"../../layouts/MainLayout\";\n\n//pages\nimport IndexPage from \"../../pages/IndexPage\";\n\nlibrary.add(fas);\n\nconst IndexPageWithLayout = () => (\n    <MainLayout>\n        <IndexPage />\n    </MainLayout>\n);\n\nfunction Application() {\n    return (\n        <Router basepath={process.env.PUBLIC_URL}>\n            <IndexPageWithLayout path={\"/\"} />\n        </Router>\n    );\n}\n\nexport default Application;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\n\nimport rootReducer from \"./reducers\";\nimport Application from \"./components/Application\";\n\nimport \"./index.scss\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n    rootReducer,\n    composeEnhancers(applyMiddleware(thunk))\n);\n\nReactDOM.render(\n    <Provider store={store}>\n        <Application />\n    </Provider>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}